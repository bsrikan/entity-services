<es:model xmlns:es="http://marklogic.com/entity-services">
  <es:info>
      <es:title>Order</es:title>
      <es:version>0.0.5</es:version>
      <es:base-uri>http://order5</es:base-uri>
      <es:description>This ET doc has a reference to order details that HAS a primary key, and thus can be many to may</es:description>
      
  </es:info>
  <es:definitions>
    <Order>
        <es:properties>
            <orderId>
                <es:datatype>string</es:datatype>
            </orderId>
            <orderDate>
                <es:datatype>date</es:datatype>
            </orderDate>
            <hasOrderDetails>
                <es:datatype>array</es:datatype>
                <es:items>
                    <es:ref>#/definitions/OrderDetails</es:ref>
                </es:items>
            </hasOrderDetails>
        </es:properties>
        <es:primary-key>orderId</es:primary-key>
        <es:required>orderId</es:required>
        <es:required>orderDate</es:required>
    </Order>
    <OrderDetails>
        <es:properties>
            <lineItemId>
                <es:datatype>integer</es:datatype>
            </lineItemId>
            <quantity>
                <es:datatype>integer</es:datatype>
            </quantity>
            <productName>
                <es:datatype>string</es:datatype>
            </productName>
        </es:properties>
        <es:primary-key>lineItemId</es:primary-key>
    </OrderDetails>
  </es:definitions>
</es:model>
